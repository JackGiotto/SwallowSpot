{% extends "layout.html" %}

{% block content %}

<script src="{{ url_for('static', filename = 'js/profile_actions.js') }}"></script>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<div class="profile-out">
    <span id="notAccessed">
        <h1>Non hai ancora eseguito l'accesso!</h1>
        <a href="{{ url_for('auth.login') }}" class="btn btn-primary btn-lg"><i class="fa-solid fa-right-to-bracket"></i> Accedi</a>
    </span>
</div>

<div class="visual-mode">
    <h2>Modifica il tema di visualizzazione</h2>
    <div class="visual-out">
        <label class="switch2">
            <input type="checkbox" id="toggle" checked />
            <span class="slider2"></span>
        </label>
        <p><span id="modeStatus">Light</span> Mode</p>
    </div>
</div>

<script>
    //dark / light mode
    if(document.cookie.includes("dark")) {        //check the visual mode state from the local storage variable
        document.getElementById("toggle").checked = false;
        changeMode();
    }
    else {
        document.getElementById("toggle").checked = true;
        changeMode()
    }

    document.getElementById("toggle").addEventListener('change', changeMode); //function to change styles

    ib

    function changeMode() {
        var status = document.getElementById("modeStatus");
        var body = document.querySelector("body");
        var cookiesLabel = document.getElementById("cookies");
        var cookiesModal = document.getElementById("customizeCookies");
        //genera data scadenza cookies persistents (30 giorni)
        var expireDate = new Date();
        expireDate.setDate(expireDate.getDate() + 30);

        if(document.getElementById("toggle").checked) {
            document.cookie = "SPOTLIGHT = light;expires=" + expireDate.toUTCString()+"; path=/";
            //light mode
            status.innerHTML = "Light";
            body.style.backgroundColor = "#EDFCFF";
            body.style.color = "#212529";
            cookiesLabel.style.backgroundColor = "#EDFCFF";
            cookiesModal.setAttribute('data-bs-theme', "light");
        }
        else {
            document.cookie = "SPOTLIGHT = dark;expires=" + expireDate.toUTCString()+"; path=/";
            //dark mode
            status.innerHTML = "Dark";
            body.style.backgroundColor = "#222222";
            body.style.color = "white";
            cookiesLabel.style.backgroundColor = "#222222";
            cookiesModal.setAttribute('data-bs-theme', "dark");
        }
    }
</script>

{% endblock %}